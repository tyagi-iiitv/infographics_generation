{"ast":null,"code":"var _jsxFileName = \"/Users/yulinfeng/Development/infographics_generation/interface/src/Draggable.js\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\n\nclass Draggable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      relX: 0,\n      relY: 0 //x: props.x,\n      //y: props.y\n\n    };\n    this.gridX = props.gridX || 1;\n    this.gridY = props.gridY || 1;\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchMove = this.onTouchMove.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n  }\n\n  onStart(e) {\n    const ref = ReactDOM.findDOMNode(this.handle);\n    const body = document.body;\n    const box = ref.getBoundingClientRect();\n    this.setState({\n      relX: e.pageX - (box.left + body.scrollLeft - body.clientLeft),\n      relY: e.pageY - (box.top + body.scrollTop - body.clientTop)\n    });\n  }\n\n  onMove(e) {\n    const x = Math.trunc((e.pageX - this.state.relX) / this.gridX) * this.gridX;\n    const y = Math.trunc((e.pageY - this.state.relY) / this.gridY) * this.gridY;\n\n    if (x !== this.state.x || y !== this.state.y) {\n      this.setState({\n        x,\n        y\n      });\n      this.props.onMove && this.props.onMove(this.state.x, this.state.y);\n    }\n  }\n\n  onMouseDown(e) {\n    if (e.button !== 0) return;\n    this.onStart(e);\n    document.addEventListener('mousemove', this.onMouseMove);\n    document.addEventListener('mouseup', this.onMouseUp);\n    e.preventDefault();\n  }\n\n  onMouseUp(e) {\n    document.removeEventListener('mousemove', this.onMouseMove);\n    document.removeEventListener('mouseup', this.onMouseUp);\n    this.props.onStop && this.props.onStop(this.state.x, this.state.y);\n    e.preventDefault();\n  }\n\n  onMouseMove(e) {\n    this.onMove(e);\n    e.preventDefault();\n  }\n\n  onTouchStart(e) {\n    this.onStart(e.touches[0]);\n    document.addEventListener('touchmove', this.onTouchMove, {\n      passive: false\n    });\n    document.addEventListener('touchend', this.onTouchEnd, {\n      passive: false\n    });\n    e.preventDefault();\n  }\n\n  onTouchMove(e) {\n    this.onMove(e.touches[0]);\n    e.preventDefault();\n  }\n\n  onTouchEnd(e) {\n    document.removeEventListener('touchmove', this.onTouchMove);\n    document.removeEventListener('touchend', this.onTouchEnd);\n    this.props.onStop && this.props.onStop(this.state.x, this.state.y);\n    e.preventDefault();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      onMouseDown: this.onMouseDown,\n      onTouchStart: this.onTouchStart,\n      style: {\n        position: 'absolute',\n        left: this.state.x,\n        top: this.state.y,\n        touchAction: 'none'\n      },\n      ref: div => {\n        this.handle = div;\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 16\n      }\n    }, this.props.children);\n  }\n\n}\n\nDraggable.propTypes = {\n  onMove: PropTypes.func,\n  onStop: PropTypes.func,\n  x: PropTypes.number.isRequired,\n  y: PropTypes.number.isRequired,\n  gridX: PropTypes.number,\n  gridY: PropTypes.number\n};\nexport default Draggable;","map":{"version":3,"sources":["/Users/yulinfeng/Development/infographics_generation/interface/src/Draggable.js"],"names":["React","ReactDOM","PropTypes","Draggable","Component","constructor","props","state","relX","relY","gridX","gridY","onMouseDown","bind","onMouseMove","onMouseUp","onTouchStart","onTouchMove","onTouchEnd","onStart","e","ref","findDOMNode","handle","body","document","box","getBoundingClientRect","setState","pageX","left","scrollLeft","clientLeft","pageY","top","scrollTop","clientTop","onMove","x","Math","trunc","y","button","addEventListener","preventDefault","removeEventListener","onStop","touches","passive","render","position","touchAction","div","children","propTypes","func","number","isRequired"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\n\nclass Draggable extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            relX: 0,\n            relY: 0,\n            //x: props.x,\n            //y: props.y\n        };\n        this.gridX = props.gridX || 1;\n        this.gridY = props.gridY || 1;\n        this.onMouseDown = this.onMouseDown.bind(this);\n        this.onMouseMove = this.onMouseMove.bind(this);\n        this.onMouseUp = this.onMouseUp.bind(this);\n        this.onTouchStart = this.onTouchStart.bind(this);\n        this.onTouchMove = this.onTouchMove.bind(this);\n        this.onTouchEnd = this.onTouchEnd.bind(this);\n    }\n  \n    static propTypes = {\n        onMove: PropTypes.func,\n        onStop: PropTypes.func,\n        x: PropTypes.number.isRequired,\n        y: PropTypes.number.isRequired,\n        gridX: PropTypes.number,\n        gridY: PropTypes.number\n    }; \n  \n    onStart(e) {\n        const ref = ReactDOM.findDOMNode(this.handle);\n        const body = document.body;\n        const box = ref.getBoundingClientRect();\n        this.setState({\n            relX: e.pageX - (box.left + body.scrollLeft - body.clientLeft),\n            relY: e.pageY - (box.top + body.scrollTop - body.clientTop)\n        });\n    }\n  \n    onMove(e) {\n        const x = Math.trunc((e.pageX - this.state.relX) / this.gridX) * this.gridX;\n        const y = Math.trunc((e.pageY - this.state.relY) / this.gridY) * this.gridY;\n        if (x !== this.state.x || y !== this.state.y) {\n            this.setState({\n                x,\n                y\n            });\n            this.props.onMove && this.props.onMove(this.state.x, this.state.y);\n        }        \n    }\n  \n    onMouseDown(e) {\n        if (e.button !== 0) return;\n        this.onStart(e);\n        document.addEventListener('mousemove', this.onMouseMove);\n        document.addEventListener('mouseup', this.onMouseUp);\n        e.preventDefault();\n    }\n  \n    onMouseUp(e) {\n        document.removeEventListener('mousemove', this.onMouseMove);\n        document.removeEventListener('mouseup', this.onMouseUp);\n        this.props.onStop && this.props.onStop(this.state.x, this.state.y);\n        e.preventDefault();\n    }\n  \n    onMouseMove(e) {\n        this.onMove(e);\n        e.preventDefault();\n    }\n  \n    onTouchStart(e) {\n        this.onStart(e.touches[0]);\n        document.addEventListener('touchmove', this.onTouchMove, {passive: false});\n        document.addEventListener('touchend', this.onTouchEnd, {passive: false});\n        e.preventDefault();\n    }\n  \n    onTouchMove(e) {\n        this.onMove(e.touches[0]);\n        e.preventDefault();\n    }\n  \n    onTouchEnd(e) {\n        document.removeEventListener('touchmove', this.onTouchMove);\n        document.removeEventListener('touchend', this.onTouchEnd);\n        this.props.onStop && this.props.onStop(this.state.x, this.state.y);\n        e.preventDefault();\n    }\n  \n    render() {\n        return <div\n            onMouseDown={this.onMouseDown}\n            onTouchStart={this.onTouchStart}\n            style={{\n                position: 'absolute',\n                left: this.state.x,\n                top: this.state.y,\n                touchAction: 'none'\n            }}\n            ref={(div) => { this.handle = div; }}\n        >\n            {this.props.children}\n        </div>;\n    }\n}\nexport default Draggable;"]},"metadata":{},"sourceType":"module"}