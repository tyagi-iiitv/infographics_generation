{"ast":null,"code":"var _jsxFileName = \"/Users/yulinfeng/Development/infographics_generation/interface/src/Draggable.js\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\n\nclass Draggable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      relX: 0,\n      relY: 0,\n      x: props.x,\n      y: props.y\n    };\n    this.gridX = props.gridX || 1;\n    this.gridY = props.gridY || 1;\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.onTouchStart = this.onTouchStart.bind(this);\n    this.onTouchMove = this.onTouchMove.bind(this);\n    this.onTouchEnd = this.onTouchEnd.bind(this);\n  }\n\n  onStart(e) {\n    const ref = ReactDOM.findDOMNode(this.handle);\n    const body = document.body;\n    const box = ref.getBoundingClientRect();\n    this.setState({\n      relX: e.pageX - (box.left + body.scrollLeft - body.clientLeft),\n      relY: e.pageY - (box.top + body.scrollTop - body.clientTop)\n    });\n  }\n\n  onMove(e) {\n    const x = Math.trunc((e.pageX - this.state.relX) / this.gridX) * this.gridX;\n    const y = Math.trunc((e.pageY - this.state.relY) / this.gridY) * this.gridY;\n\n    if (x !== this.state.x || y !== this.state.y) {\n      this.setState({\n        x,\n        y\n      });\n      this.props.onMove && this.props.onMove(this.state.x, this.state.y);\n    }\n  }\n\n  onMouseDown(e) {\n    if (e.button !== 0) return;\n    this.onStart(e);\n    document.addEventListener('mousemove', this.onMouseMove);\n    document.addEventListener('mouseup', this.onMouseUp);\n    e.preventDefault();\n  }\n\n  onMouseUp(e) {\n    document.removeEventListener('mousemove', this.onMouseMove);\n    document.removeEventListener('mouseup', this.onMouseUp);\n    this.props.onStop && this.props.onStop(this.state.x, this.state.y);\n    e.preventDefault();\n  }\n\n  onMouseMove(e) {\n    this.onMove(e);\n    e.preventDefault();\n  }\n\n  onTouchStart(e) {\n    this.onStart(e.touches[0]);\n    document.addEventListener('touchmove', this.onTouchMove, {\n      passive: false\n    });\n    document.addEventListener('touchend', this.onTouchEnd, {\n      passive: false\n    });\n    e.preventDefault();\n  }\n\n  onTouchMove(e) {\n    this.onMove(e.touches[0]);\n    e.preventDefault();\n  }\n\n  onTouchEnd(e) {\n    document.removeEventListener('touchmove', this.onTouchMove);\n    document.removeEventListener('touchend', this.onTouchEnd);\n    this.props.onStop && this.props.onStop(this.state.x, this.state.y);\n    e.preventDefault();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      onMouseDown: this.onMouseDown,\n      onTouchStart: this.onTouchStart,\n      style: {\n        position: 'absolute',\n        left: this.state.x,\n        top: this.state.y,\n        touchAction: 'none'\n      },\n      ref: div => {\n        this.handle = div;\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 16\n      }\n    }, this.props.children);\n  }\n\n}\n\nDraggable.propTypes = {\n  onMove: PropTypes.func,\n  onStop: PropTypes.func,\n  x: PropTypes.number.isRequired,\n  y: PropTypes.number.isRequired,\n  gridX: PropTypes.number,\n  gridY: PropTypes.number\n};\nexport default Draggable;","map":{"version":3,"sources":["/Users/yulinfeng/Development/infographics_generation/interface/src/Draggable.js"],"names":["React","ReactDOM","PropTypes","Draggable","Component","constructor","props","state","relX","relY","x","y","gridX","gridY","onMouseDown","bind","onMouseMove","onMouseUp","onTouchStart","onTouchMove","onTouchEnd","onStart","e","ref","findDOMNode","handle","body","document","box","getBoundingClientRect","setState","pageX","left","scrollLeft","clientLeft","pageY","top","scrollTop","clientTop","onMove","Math","trunc","button","addEventListener","preventDefault","removeEventListener","onStop","touches","passive","render","position","touchAction","div","children","propTypes","func","number","isRequired"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\n\nclass Draggable extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            relX: 0,\n            relY: 0,\n            x: props.x,\n            y: props.y\n        };\n        this.gridX = props.gridX || 1;\n        this.gridY = props.gridY || 1;\n        this.onMouseDown = this.onMouseDown.bind(this);\n        this.onMouseMove = this.onMouseMove.bind(this);\n        this.onMouseUp = this.onMouseUp.bind(this);\n        this.onTouchStart = this.onTouchStart.bind(this);\n        this.onTouchMove = this.onTouchMove.bind(this);\n        this.onTouchEnd = this.onTouchEnd.bind(this);\n    }\n  \n    static propTypes = {\n        onMove: PropTypes.func,\n        onStop: PropTypes.func,\n        x: PropTypes.number.isRequired,\n        y: PropTypes.number.isRequired,\n        gridX: PropTypes.number,\n        gridY: PropTypes.number\n    }; \n  \n    onStart(e) {\n        const ref = ReactDOM.findDOMNode(this.handle);\n        const body = document.body;\n        const box = ref.getBoundingClientRect();\n        this.setState({\n            relX: e.pageX - (box.left + body.scrollLeft - body.clientLeft),\n            relY: e.pageY - (box.top + body.scrollTop - body.clientTop)\n        });\n    }\n  \n    onMove(e) {\n        const x = Math.trunc((e.pageX - this.state.relX) / this.gridX) * this.gridX;\n        const y = Math.trunc((e.pageY - this.state.relY) / this.gridY) * this.gridY;\n        if (x !== this.state.x || y !== this.state.y) {\n            this.setState({\n                x,\n                y\n            });\n            this.props.onMove && this.props.onMove(this.state.x, this.state.y);\n        }        \n    }\n  \n    onMouseDown(e) {\n        if (e.button !== 0) return;\n        this.onStart(e);\n        document.addEventListener('mousemove', this.onMouseMove);\n        document.addEventListener('mouseup', this.onMouseUp);\n        e.preventDefault();\n    }\n  \n    onMouseUp(e) {\n        document.removeEventListener('mousemove', this.onMouseMove);\n        document.removeEventListener('mouseup', this.onMouseUp);\n        this.props.onStop && this.props.onStop(this.state.x, this.state.y);\n        e.preventDefault();\n    }\n  \n    onMouseMove(e) {\n        this.onMove(e);\n        e.preventDefault();\n    }\n  \n    onTouchStart(e) {\n        this.onStart(e.touches[0]);\n        document.addEventListener('touchmove', this.onTouchMove, {passive: false});\n        document.addEventListener('touchend', this.onTouchEnd, {passive: false});\n        e.preventDefault();\n    }\n  \n    onTouchMove(e) {\n        this.onMove(e.touches[0]);\n        e.preventDefault();\n    }\n  \n    onTouchEnd(e) {\n        document.removeEventListener('touchmove', this.onTouchMove);\n        document.removeEventListener('touchend', this.onTouchEnd);\n        this.props.onStop && this.props.onStop(this.state.x, this.state.y);\n        e.preventDefault();\n    }\n\n    render() {\n        return <div\n            onMouseDown={this.onMouseDown}\n            onTouchStart={this.onTouchStart}\n            style={{\n                position: 'absolute',\n                left: this.state.x,\n                top: this.state.y,\n                touchAction: 'none'\n            }}\n            ref={(div) => { this.handle = div; }}\n        >\n            {this.props.children}\n        </div>;\n    }\n}\nexport default Draggable;"]},"metadata":{},"sourceType":"module"}