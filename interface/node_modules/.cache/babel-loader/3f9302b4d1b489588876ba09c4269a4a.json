{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Util_1 = require(\"../Util\");\n\nvar Factory_1 = require(\"../Factory\");\n\nvar Shape_1 = require(\"../Shape\");\n\nvar Validators_1 = require(\"../Validators\");\n\nvar Global_1 = require(\"../Global\");\n\nvar Image = function (_super) {\n  __extends(Image, _super);\n\n  function Image() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Image.prototype._useBufferCanvas = function () {\n    return !!((this.hasShadow() || this.getAbsoluteOpacity() !== 1) && this.hasStroke() && this.getStage());\n  };\n\n  Image.prototype._sceneFunc = function (context) {\n    var width = this.width(),\n        height = this.height(),\n        image = this.image(),\n        cropWidth,\n        cropHeight,\n        params;\n\n    if (image) {\n      cropWidth = this.cropWidth();\n      cropHeight = this.cropHeight();\n\n      if (cropWidth && cropHeight) {\n        params = [image, this.cropX(), this.cropY(), cropWidth, cropHeight, 0, 0, width, height];\n      } else {\n        params = [image, 0, 0, width, height];\n      }\n    }\n\n    if (this.hasFill() || this.hasStroke()) {\n      context.beginPath();\n      context.rect(0, 0, width, height);\n      context.closePath();\n      context.fillStrokeShape(this);\n    }\n\n    if (image) {\n      context.drawImage.apply(context, params);\n    }\n  };\n\n  Image.prototype._hitFunc = function (context) {\n    var width = this.width(),\n        height = this.height();\n    context.beginPath();\n    context.rect(0, 0, width, height);\n    context.closePath();\n    context.fillStrokeShape(this);\n  };\n\n  Image.prototype.getWidth = function () {\n    var _a;\n\n    var image = this.image();\n    return (_a = this.attrs.width) !== null && _a !== void 0 ? _a : image ? image.width : 0;\n  };\n\n  Image.prototype.getHeight = function () {\n    var _a;\n\n    var image = this.image();\n    return (_a = this.attrs.height) !== null && _a !== void 0 ? _a : image ? image.height : 0;\n  };\n\n  Image.fromURL = function (url, callback) {\n    var img = Util_1.Util.createImageElement();\n\n    img.onload = function () {\n      var image = new Image({\n        image: img\n      });\n      callback(image);\n    };\n\n    img.crossOrigin = 'Anonymous';\n    img.src = url;\n  };\n\n  return Image;\n}(Shape_1.Shape);\n\nexports.Image = Image;\nImage.prototype.className = 'Image';\n\nGlobal_1._registerNode(Image);\n\nFactory_1.Factory.addGetterSetter(Image, 'image');\nFactory_1.Factory.addComponentsGetterSetter(Image, 'crop', ['x', 'y', 'width', 'height']);\nFactory_1.Factory.addGetterSetter(Image, 'cropX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Image, 'cropY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Image, 'cropWidth', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Image, 'cropHeight', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Image);","map":{"version":3,"sources":["/mnt/c/Users/anjul/OneDrive - Stony Brook University/Documents/infographics_generation/interface/node_modules/konva/lib/shapes/Image.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","defineProperty","exports","value","Util_1","require","Factory_1","Shape_1","Validators_1","Global_1","Image","_super","apply","arguments","_useBufferCanvas","hasShadow","getAbsoluteOpacity","hasStroke","getStage","_sceneFunc","context","width","height","image","cropWidth","cropHeight","params","cropX","cropY","hasFill","beginPath","rect","closePath","fillStrokeShape","drawImage","_hitFunc","getWidth","_a","attrs","getHeight","fromURL","url","callback","img","Util","createImageElement","onload","crossOrigin","src","Shape","className","_registerNode","Factory","addGetterSetter","addComponentsGetterSetter","getNumberValidator","Collection","mapMethods"],"mappings":"AAAA;;AACA,IAAIA,SAAS,GAAI,QAAQ,KAAKA,SAAd,IAA6B,YAAY;AACrD,MAAIC,aAAa,GAAG,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChCF,IAAAA,aAAa,GAAGG,MAAM,CAACC,cAAP,IACX;AAAEC,MAAAA,SAAS,EAAE;AAAb,iBAA6BC,KAA7B,IAAsC,UAAUL,CAAV,EAAaC,CAAb,EAAgB;AAAED,MAAAA,CAAC,CAACI,SAAF,GAAcH,CAAd;AAAkB,KAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AAAE,WAAK,IAAIK,CAAT,IAAcL,CAAd,EAAiB,IAAIA,CAAC,CAACM,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBN,CAAC,CAACM,CAAD,CAAD,GAAOL,CAAC,CAACK,CAAD,CAAR;AAAc,KAF9E;;AAGA,WAAOP,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAApB;AACH,GALD;;AAMA,SAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AACnBF,IAAAA,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAAb;;AACA,aAASO,EAAT,GAAc;AAAE,WAAKC,WAAL,GAAmBT,CAAnB;AAAuB;;AACvCA,IAAAA,CAAC,CAACU,SAAF,GAAcT,CAAC,KAAK,IAAN,GAAaC,MAAM,CAACS,MAAP,CAAcV,CAAd,CAAb,IAAiCO,EAAE,CAACE,SAAH,GAAeT,CAAC,CAACS,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;AACH,GAJD;AAKH,CAZ2C,EAA5C;;AAaAN,MAAM,CAACU,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AACA,IAAIC,MAAM,GAAGC,OAAO,CAAC,SAAD,CAApB;;AACA,IAAIC,SAAS,GAAGD,OAAO,CAAC,YAAD,CAAvB;;AACA,IAAIE,OAAO,GAAGF,OAAO,CAAC,UAAD,CAArB;;AACA,IAAIG,YAAY,GAAGH,OAAO,CAAC,eAAD,CAA1B;;AACA,IAAII,QAAQ,GAAGJ,OAAO,CAAC,WAAD,CAAtB;;AACA,IAAIK,KAAK,GAAI,UAAUC,MAAV,EAAkB;AAC3BxB,EAAAA,SAAS,CAACuB,KAAD,EAAQC,MAAR,CAAT;;AACA,WAASD,KAAT,GAAiB;AACb,WAAOC,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACC,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAnB,IAAoD,IAA3D;AACH;;AACDH,EAAAA,KAAK,CAACX,SAAN,CAAgBe,gBAAhB,GAAmC,YAAY;AAC3C,WAAO,CAAC,EAAE,CAAC,KAAKC,SAAL,MAAoB,KAAKC,kBAAL,OAA8B,CAAnD,KACN,KAAKC,SAAL,EADM,IAEN,KAAKC,QAAL,EAFI,CAAR;AAGH,GAJD;;AAKAR,EAAAA,KAAK,CAACX,SAAN,CAAgBoB,UAAhB,GAA6B,UAAUC,OAAV,EAAmB;AAC5C,QAAIC,KAAK,GAAG,KAAKA,KAAL,EAAZ;AAAA,QAA0BC,MAAM,GAAG,KAAKA,MAAL,EAAnC;AAAA,QAAkDC,KAAK,GAAG,KAAKA,KAAL,EAA1D;AAAA,QAAwEC,SAAxE;AAAA,QAAmFC,UAAnF;AAAA,QAA+FC,MAA/F;;AACA,QAAIH,KAAJ,EAAW;AACPC,MAAAA,SAAS,GAAG,KAAKA,SAAL,EAAZ;AACAC,MAAAA,UAAU,GAAG,KAAKA,UAAL,EAAb;;AACA,UAAID,SAAS,IAAIC,UAAjB,EAA6B;AACzBC,QAAAA,MAAM,GAAG,CACLH,KADK,EAEL,KAAKI,KAAL,EAFK,EAGL,KAAKC,KAAL,EAHK,EAILJ,SAJK,EAKLC,UALK,EAML,CANK,EAOL,CAPK,EAQLJ,KARK,EASLC,MATK,CAAT;AAWH,OAZD,MAaK;AACDI,QAAAA,MAAM,GAAG,CAACH,KAAD,EAAQ,CAAR,EAAW,CAAX,EAAcF,KAAd,EAAqBC,MAArB,CAAT;AACH;AACJ;;AACD,QAAI,KAAKO,OAAL,MAAkB,KAAKZ,SAAL,EAAtB,EAAwC;AACpCG,MAAAA,OAAO,CAACU,SAAR;AACAV,MAAAA,OAAO,CAACW,IAAR,CAAa,CAAb,EAAgB,CAAhB,EAAmBV,KAAnB,EAA0BC,MAA1B;AACAF,MAAAA,OAAO,CAACY,SAAR;AACAZ,MAAAA,OAAO,CAACa,eAAR,CAAwB,IAAxB;AACH;;AACD,QAAIV,KAAJ,EAAW;AACPH,MAAAA,OAAO,CAACc,SAAR,CAAkBtB,KAAlB,CAAwBQ,OAAxB,EAAiCM,MAAjC;AACH;AACJ,GA/BD;;AAgCAhB,EAAAA,KAAK,CAACX,SAAN,CAAgBoC,QAAhB,GAA2B,UAAUf,OAAV,EAAmB;AAC1C,QAAIC,KAAK,GAAG,KAAKA,KAAL,EAAZ;AAAA,QAA0BC,MAAM,GAAG,KAAKA,MAAL,EAAnC;AACAF,IAAAA,OAAO,CAACU,SAAR;AACAV,IAAAA,OAAO,CAACW,IAAR,CAAa,CAAb,EAAgB,CAAhB,EAAmBV,KAAnB,EAA0BC,MAA1B;AACAF,IAAAA,OAAO,CAACY,SAAR;AACAZ,IAAAA,OAAO,CAACa,eAAR,CAAwB,IAAxB;AACH,GAND;;AAOAvB,EAAAA,KAAK,CAACX,SAAN,CAAgBqC,QAAhB,GAA2B,YAAY;AACnC,QAAIC,EAAJ;;AACA,QAAId,KAAK,GAAG,KAAKA,KAAL,EAAZ;AACA,WAAO,CAACc,EAAE,GAAG,KAAKC,KAAL,CAAWjB,KAAjB,MAA4B,IAA5B,IAAoCgB,EAAE,KAAK,KAAK,CAAhD,GAAoDA,EAApD,GAA0Dd,KAAK,GAAGA,KAAK,CAACF,KAAT,GAAiB,CAAvF;AACH,GAJD;;AAKAX,EAAAA,KAAK,CAACX,SAAN,CAAgBwC,SAAhB,GAA4B,YAAY;AACpC,QAAIF,EAAJ;;AACA,QAAId,KAAK,GAAG,KAAKA,KAAL,EAAZ;AACA,WAAO,CAACc,EAAE,GAAG,KAAKC,KAAL,CAAWhB,MAAjB,MAA6B,IAA7B,IAAqCe,EAAE,KAAK,KAAK,CAAjD,GAAqDA,EAArD,GAA2Dd,KAAK,GAAGA,KAAK,CAACD,MAAT,GAAkB,CAAzF;AACH,GAJD;;AAKAZ,EAAAA,KAAK,CAAC8B,OAAN,GAAgB,UAAUC,GAAV,EAAeC,QAAf,EAAyB;AACrC,QAAIC,GAAG,GAAGvC,MAAM,CAACwC,IAAP,CAAYC,kBAAZ,EAAV;;AACAF,IAAAA,GAAG,CAACG,MAAJ,GAAa,YAAY;AACrB,UAAIvB,KAAK,GAAG,IAAIb,KAAJ,CAAU;AAClBa,QAAAA,KAAK,EAAEoB;AADW,OAAV,CAAZ;AAGAD,MAAAA,QAAQ,CAACnB,KAAD,CAAR;AACH,KALD;;AAMAoB,IAAAA,GAAG,CAACI,WAAJ,GAAkB,WAAlB;AACAJ,IAAAA,GAAG,CAACK,GAAJ,GAAUP,GAAV;AACH,GAVD;;AAWA,SAAO/B,KAAP;AACH,CAvEY,CAuEXH,OAAO,CAAC0C,KAvEG,CAAb;;AAwEA/C,OAAO,CAACQ,KAAR,GAAgBA,KAAhB;AACAA,KAAK,CAACX,SAAN,CAAgBmD,SAAhB,GAA4B,OAA5B;;AACAzC,QAAQ,CAAC0C,aAAT,CAAuBzC,KAAvB;;AACAJ,SAAS,CAAC8C,OAAV,CAAkBC,eAAlB,CAAkC3C,KAAlC,EAAyC,OAAzC;AACAJ,SAAS,CAAC8C,OAAV,CAAkBE,yBAAlB,CAA4C5C,KAA5C,EAAmD,MAAnD,EAA2D,CAAC,GAAD,EAAM,GAAN,EAAW,OAAX,EAAoB,QAApB,CAA3D;AACAJ,SAAS,CAAC8C,OAAV,CAAkBC,eAAlB,CAAkC3C,KAAlC,EAAyC,OAAzC,EAAkD,CAAlD,EAAqDF,YAAY,CAAC+C,kBAAb,EAArD;AACAjD,SAAS,CAAC8C,OAAV,CAAkBC,eAAlB,CAAkC3C,KAAlC,EAAyC,OAAzC,EAAkD,CAAlD,EAAqDF,YAAY,CAAC+C,kBAAb,EAArD;AACAjD,SAAS,CAAC8C,OAAV,CAAkBC,eAAlB,CAAkC3C,KAAlC,EAAyC,WAAzC,EAAsD,CAAtD,EAAyDF,YAAY,CAAC+C,kBAAb,EAAzD;AACAjD,SAAS,CAAC8C,OAAV,CAAkBC,eAAlB,CAAkC3C,KAAlC,EAAyC,YAAzC,EAAuD,CAAvD,EAA0DF,YAAY,CAAC+C,kBAAb,EAA1D;AACAnD,MAAM,CAACoD,UAAP,CAAkBC,UAAlB,CAA6B/C,KAA7B","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Util_1 = require(\"../Util\");\nvar Factory_1 = require(\"../Factory\");\nvar Shape_1 = require(\"../Shape\");\nvar Validators_1 = require(\"../Validators\");\nvar Global_1 = require(\"../Global\");\nvar Image = (function (_super) {\n    __extends(Image, _super);\n    function Image() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Image.prototype._useBufferCanvas = function () {\n        return !!((this.hasShadow() || this.getAbsoluteOpacity() !== 1) &&\n            this.hasStroke() &&\n            this.getStage());\n    };\n    Image.prototype._sceneFunc = function (context) {\n        var width = this.width(), height = this.height(), image = this.image(), cropWidth, cropHeight, params;\n        if (image) {\n            cropWidth = this.cropWidth();\n            cropHeight = this.cropHeight();\n            if (cropWidth && cropHeight) {\n                params = [\n                    image,\n                    this.cropX(),\n                    this.cropY(),\n                    cropWidth,\n                    cropHeight,\n                    0,\n                    0,\n                    width,\n                    height\n                ];\n            }\n            else {\n                params = [image, 0, 0, width, height];\n            }\n        }\n        if (this.hasFill() || this.hasStroke()) {\n            context.beginPath();\n            context.rect(0, 0, width, height);\n            context.closePath();\n            context.fillStrokeShape(this);\n        }\n        if (image) {\n            context.drawImage.apply(context, params);\n        }\n    };\n    Image.prototype._hitFunc = function (context) {\n        var width = this.width(), height = this.height();\n        context.beginPath();\n        context.rect(0, 0, width, height);\n        context.closePath();\n        context.fillStrokeShape(this);\n    };\n    Image.prototype.getWidth = function () {\n        var _a;\n        var image = this.image();\n        return (_a = this.attrs.width) !== null && _a !== void 0 ? _a : (image ? image.width : 0);\n    };\n    Image.prototype.getHeight = function () {\n        var _a;\n        var image = this.image();\n        return (_a = this.attrs.height) !== null && _a !== void 0 ? _a : (image ? image.height : 0);\n    };\n    Image.fromURL = function (url, callback) {\n        var img = Util_1.Util.createImageElement();\n        img.onload = function () {\n            var image = new Image({\n                image: img\n            });\n            callback(image);\n        };\n        img.crossOrigin = 'Anonymous';\n        img.src = url;\n    };\n    return Image;\n}(Shape_1.Shape));\nexports.Image = Image;\nImage.prototype.className = 'Image';\nGlobal_1._registerNode(Image);\nFactory_1.Factory.addGetterSetter(Image, 'image');\nFactory_1.Factory.addComponentsGetterSetter(Image, 'crop', ['x', 'y', 'width', 'height']);\nFactory_1.Factory.addGetterSetter(Image, 'cropX', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Image, 'cropY', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Image, 'cropWidth', 0, Validators_1.getNumberValidator());\nFactory_1.Factory.addGetterSetter(Image, 'cropHeight', 0, Validators_1.getNumberValidator());\nUtil_1.Collection.mapMethods(Image);\n"]},"metadata":{},"sourceType":"script"}